package com.mystere.mercadopago.service;

import com.mystere.mercadopago.model.AdminUser;
import com.mystere.mercadopago.repository.AdminUserRepository;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

@Component
public class AdminInitializer implements CommandLineRunner {

    private final AdminUserRepository adminRepo;

    public AdminInitializer(AdminUserRepository adminRepo) {
        this.adminRepo = adminRepo;
    }

    @Override
    public void run(String... args) {
        if (adminRepo.count() == 0) {
            AdminUser admin = new AdminUser();
            admin.setUsername("admin");
            admin.setPassword("admin123");

            adminRepo.save(admin);

            System.out.println("✔ ADMIN CREADO → usuario: admin | password: admin123");
        } else {
            System.out.println("ℹ Admin ya existe, no se crea otro");
        }
    }
}
