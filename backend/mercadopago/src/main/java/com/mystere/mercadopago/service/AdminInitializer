package com.mystere.mercadopago.service;

import com.mystere.mercadopago.model.AdminUser;
import com.mystere.mercadopago.repository.AdminUserRepository;
import jakarta.annotation.PostConstruct;
import org.springframework.stereotype.Component;

@Component
public class AdminInitializer {

    private final AdminUserRepository adminRepo;

    public AdminInitializer(AdminUserRepository adminRepo) {
        this.adminRepo = adminRepo;
    }

    @PostConstruct
    public void initAdmin() {

        // ğŸ” Buscamos si ya existe
        AdminUser existing = adminRepo.findByUsername("admin");

        if (existing == null) {
            AdminUser admin = new AdminUser();
            admin.setUsername("admin");
            admin.setPassword("admin123"); // ğŸ” credencial fija

            adminRepo.save(admin);

            System.out.println("âœ” Admin creado: admin / admin123");
        } else {
            System.out.println("â„¹ Admin ya existe");
        }
    }
}
